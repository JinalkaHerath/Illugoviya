<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrowSense - Smart Crop Recommendations for Sri Lankan Farmers</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: none;
            margin: 0;
            padding: 20px;
            background: white;
            min-height: 100vh;
            box-shadow: none;
            position: relative;
        }

        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 2px solid #4CAF50;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #2E7D32;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 14px;
            color: #666;
        }

        .language-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .lang-btn {
            padding: 8px 16px;
            border: 2px solid #4CAF50;
            background: white;
            color: #4CAF50;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .lang-btn.active {
            background: #4CAF50;
            color: white;
        }

        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1;
        }

        .section h3 {
            color: #2E7D32;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .location-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #e8f5e8;
            border-radius: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .district-selector {
            position: relative;
            margin-left: auto;
            z-index: 100;
            width: 100%;
            max-width: 300px;
        }

        .district-input {
            padding: 8px 35px 8px 12px;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            font-size: 14px;
            width: 100%;
            cursor: pointer;
            background: white;
        }

        .district-input:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
        }

        .dropdown-arrow {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #4CAF50;
            font-weight: bold;
        }

        .district-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #4CAF50;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1001;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .district-option {
            padding: 10px 12px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s;
        }

        .district-option:hover {
            background: #e8f5e8;
        }

        .district-option:last-child {
            border-bottom: none;
        }

        .district-name {
            font-weight: bold;
            color: #2E7D32;
        }

        .district-province {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }

        .weather-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .weather-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #ddd;
        }

        .weather-value {
            font-size: 24px;
            font-weight: bold;
            color: #2E7D32;
        }

        .weather-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .season-indicator {
            text-align: center;
            padding: 15px;
            background: linear-gradient(45deg, #FF9800, #FF5722);
            color: white;
            border-radius: 10px;
            font-weight: bold;
        }

        .soil-selector {
            margin-bottom: 15px;
        }

        select, input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            margin-top: 5px;
        }

        select:focus, input[type="number"]:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .analyze-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #4CAF50, #2E7D32);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .recommendations {
            display: none;
        }

        .crops-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .crop-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border-left: 5px solid #4CAF50;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .crop-name {
            font-size: 20px;
            font-weight: bold;
            color: #2E7D32;
            margin-bottom: 10px;
        }

        .crop-details {
            color: #666;
            line-height: 1.6;
        }

        .success-rate {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
        }

        .crop-price {
            margin-top: 10px;
            color: #2E7D32;
            font-weight: bold;
        }

        .alert {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .loading {
            text-align: center;
            padding: 30px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        .nav-tabs {
            display: flex;
            justify-content: space-around;
            background: white;
            padding: 10px;
            border-radius: 25px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
            flex-wrap: wrap;
        }

        .tab-btn {
            flex: 1;
            padding: 10px 5px;
            border: none;
            background: transparent;
            color: #666;
            font-size: 12px;
            cursor: pointer;
            border-radius: 15px;
            transition: all 0.3s;
            min-width: 80px;
            margin: 2px;
        }

        .tab-btn.active {
            background: #4CAF50;
            color: white;
            transform: translateY(-2px);
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .tip-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 6px solid;
            position: relative;
            z-index: 1;
        }

        .price-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .price-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            border-left: 6px solid;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .calendar-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Mobile-specific styles */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr !important;
                gap: 15px;
            }
            
            .section {
                padding: 15px;
            }
            
            .location-info {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .district-selector {
                margin-left: 0;
                margin-top: 10px;
                width: 100%;
            }
            
            .crops-grid {
                grid-template-columns: 1fr;
            }
            
            .tips-grid {
                grid-template-columns: 1fr;
            }
            
            .price-grid {
                grid-template-columns: 1fr;
            }
            
            .weather-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .nav-tabs {
                flex-direction: column;
                border-radius: 10px;
            }
            
            .tab-btn {
                margin: 5px 0;
                padding: 12px;
                font-size: 14px;
            }
            
            .language-selector {
                gap: 5px;
            }
            
            .lang-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .analyze-btn {
                font-size: 16px;
                padding: 12px;
            }
            
            .crop-name {
                font-size: 18px;
            }
            
            .crop-details {
                font-size: 14px;
            }
            
            .weather-value {
                font-size: 20px;
            }
            
            .price-card > div {
                flex-direction: column;
                text-align: center;
            }
            
            .price-card > div > div:last-child {
                text-align: center;
                margin-top: 10px;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 24px;
            }
            
            .tagline {
                font-size: 12px;
            }
            
            .section h3 {
                font-size: 16px;
            }
            
            .weather-grid {
                grid-template-columns: 1fr;
            }
            
            .calendar-grid {
                grid-template-columns: 1fr;
            }
            
            .tip-card {
                padding: 15px;
            }
            
            .crop-card {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
        
        <div class="header">
            <div class="logo">GrowSense</div>
            <div class="tagline" id="tagline">Smart Crop Recommendations for Sri Lankan Farmers</div>
        </div>

        <div class="language-selector">
            <button class="lang-btn active" onclick="setLanguage('en')">English</button>
            <button class="lang-btn" onclick="setLanguage('si')">සිංහල</button>
            <button class="lang-btn" onclick="setLanguage('ta')">தமிழ்</button>
        </div>

        <div class="dashboard-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
            
        <div class="section">
            <h3 id="location-title">📍 Your Location</h3>
            <div class="location-info">
                <span>🌍</span>
                <div>
                    <div id="district"><strong>Colombo District</strong><br><small style="color: #888;">Western Province</small></div>
                    <small id="coordinates">6.9271° N, 79.8612° E</small>
                </div>
                <div class="district-selector">
                    <input type="text" 
                           class="district-input" 
                           id="district-search" 
                           placeholder="Select District"
                           readonly
                           onclick="toggleDistrictDropdown()"
                           onkeyup="filterDistricts()"
                    />
                    <span class="dropdown-arrow">▼</span>
                    <div class="district-dropdown" id="district-dropdown"></div>
                </div>
            </div>
            <div style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 8px; font-size: 12px; color: #2E7D32;">
                <strong>📊 Regional Data:</strong> Weather patterns and crop recommendations are customized for your specific district and province.
            </div>
        </div>

        <div class="section">
            <h3 id="soil-title">🌱 Soil Information</h3>
            <div class="soil-selector">
                <label for="soil-type" id="soil-label">Soil Type:</label>
                <select id="soil-type" onchange="updateSoilSpecificCrops()">
                    <option value="red-earth">Red Earth (රතු පස්)</option>
                    <option value="alluvial">Alluvial Soil (ගංගා පස්)</option>
                    <option value="laterite">Laterite Soil (ලැටරයිට්)</option>
                    <option value="regosol">Regosol (රේගොසොල්)</option>
                    <option value="peat">Peat Soil (පුට් පස්)</option>
                    <option value="coastal-sand">Coastal Sand (වෙරළබඩ වාලි)</option>
                    <option value="black-cotton">Black Cotton Soil (කළු කප් පස්)</option>
                </select>
            </div>
            <div>
                <label for="farm-size" id="farm-size-label">Farm Size (acres):</label>
                <input type="number" id="farm-size" value="2.5" min="0.1" step="0.1">
            </div>
            <div id="soil-info" style="margin-top: 15px; padding: 12px; background: #f0f4f8; border-radius: 8px; border-left: 4px solid #795548;">
                <div style="font-weight: bold; color: #795548; margin-bottom: 5px;">🏔️ Red Earth Soil Characteristics:</div>
                <div style="font-size: 13px; color: #555; line-height: 1.4;">
                    Well-drained, iron-rich soil. pH: 5.5-6.5 (slightly acidic). Good for root vegetables, tea, rubber. Requires organic matter addition. Excellent drainage properties.
                </div>
            </div>
        </div>
        
        </div>

        <div class="section">
            <h3 id="weather-title">🌤️ Current Weather Conditions</h3>
            <div class="weather-grid">
                <div class="weather-item">
                    <div class="weather-value">28°C</div>
                    <div class="weather-label" id="temp-label">Temperature</div>
                </div>
                <div class="weather-item">
                    <div class="weather-value">75%</div>
                    <div class="weather-label" id="humidity-label">Humidity</div>
                </div>
                <div class="weather-item">
                    <div class="weather-value">5mm</div>
                    <div class="weather-label" id="rainfall-label">Expected Rainfall</div>
                </div>
                <div class="weather-item">
                    <div class="weather-value">12km/h</div>
                    <div class="weather-label" id="wind-label">Wind Speed</div>
                </div>
            </div>
            <div class="season-indicator">
                <span id="season-text">🌾 Maha Season (October - March)</span>
            </div>
        </div>

        <div class="alert">
            <strong id="alert-title">💡 Smart Recommendations:</strong>
            <span id="alert-text">Get customized crop suggestions based on your province's climate AND your specific soil type. Change location or soil type to see different recommendations!</span>
        </div>

        <button class="analyze-btn" onclick="analyzeCrops()" id="analyze-btn">
            🔍 Get Crop Recommendations
        </button>

        <div id="nav-tabs" class="nav-tabs" style="display: none;">
            <button class="tab-btn active" onclick="showSection('recommendations')" id="tab-crops">🌾 Crops</button>
            <button class="tab-btn" onclick="showSection('calendar')" id="tab-calendar">📅 Calendar</button>
            <button class="tab-btn" onclick="showSection('market')" id="tab-market">📊 Prices</button>
            <button class="tab-btn" onclick="showSection('tips')" id="tab-tips">💡 Tips</button>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <div id="loading-text">Analyzing soil, weather, and seasonal data...</div>
        </div>

        <div id="recommendations" class="recommendations section">
            <h3 id="rec-title">🌾 Smart Crop Recommendations</h3>
            <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #4CAF50;">
                <strong>🎯 Intelligent Matching:</strong> These recommendations combine your province's climate conditions with your specific soil type for optimal results. Switch between location-based and soil-based suggestions using the controls above!
            </div>
            
            <div class="crops-grid">
                <div class="crop-card">
                    <div class="crop-name" id="crop1-name">Sweet Potato - බටල</div>
                    <div class="crop-details" id="crop1-details">
                        Perfect for red earth soil. Thrives in well-drained, slightly acidic conditions. High yield potential. Rich in nutrients. Good storage crop.
                    </div>
                    <div class="success-rate" id="crop1-success">94% Success Rate</div>
                    <div class="crop-price" id="crop1-price">
                        💰 Current Price: Rs. 95/kg | Expected ROI: 380%<br>
                        <span style="color: #8B4513; font-size: 12px; font-weight: normal;">🌾 Red Earth Champion</span>
                    </div>
                </div>

                <div class="crop-card">
                    <div class="crop-name" id="crop2-name">Cassava - මඤ්ඤෝක්ක</div>
                    <div class="crop-details" id="crop2-details">
                        Excellent for red lateritic soils. Drought-tolerant root crop. Grows in poor soils. Multiple uses - food and industrial. Low maintenance.
                    </div>
                    <div class="success-rate" id="crop2-success">92% Success Rate</div>
                    <div class="crop-price" id="crop2-price">
                        💰 Current Price: Rs. 65/kg | Expected ROI: 320%<br>
                        <span style="color: #8B4513; font-size: 12px; font-weight: normal;">🌾 Drought Resistant</span>
                    </div>
                </div>

                <div class="crop-card">
                    <div class="crop-name" id="crop3-name">Ginger - ඉඟුරු</div>
                    <div class="crop-details" id="crop3-details">
                        Thrives in well-drained red soil. High-value spice crop. Requires organic matter. Good for hillside cultivation. Export potential.
                    </div>
                    <div class="success-rate" id="crop3-success">89% Success Rate</div>
                    <div class="crop-price" id="crop3-price">
                        💰 Current Price: Rs. 450/kg | Expected ROI: 520%<br>
                        <span style="color: #8B4513; font-size: 12px; font-weight: normal;">🌾 High Value Spice</span>
                    </div>
                </div>

                <div class="crop-card">
                    <div class="crop-name" id="crop4-name">Turmeric - කහ</div>
                    <div class="crop-details" id="crop4-details">
                        High-value spice crop. Medicinal properties. Grows well in red earth with organic matter. 9-month crop cycle. Strong export market demand.
                    </div>
                    <div class="success-rate" id="crop4-success">86% Success Rate</div>
                    <div class="crop-price" id="crop4-price">
                        💰 Current Price: Rs. 380/kg | Expected ROI: 410%<br>
                        <span style="color: #8B4513; font-size: 12px; font-weight: normal;">🌾 Medicinal Spice</span>
                    </div>
                </div>

                <div class="crop-card">
                    <div class="crop-name" id="crop5-name">Black Pepper - ගම්මිරිස්</div>
                    <div class="crop-details" id="crop5-details">
                        Climbing vine spice. Requires support structures. High value export crop. Thrives in well-drained red soil with shade. Long-term investment.
                    </div>
                    <div class="success-rate" id="crop5-success">83% Success Rate</div>
                    <div class="crop-price" id="crop5-price">
                        💰 Current Price: Rs. 800/kg | Expected ROI: 650%<br>
                        <span style="color: #8B4513; font-size: 12px; font-weight: normal;">🌾 Premium Export</span>
                    </div>
                </div>

                <div class="crop-card">
                    <div class="crop-name" id="crop6-name">Yam - අල</div>
                    <div class="crop-details" id="crop6-details">
                        Traditional root vegetable. High carbohydrate content. Suitable for red lateritic soils. Good storage life. Cultural importance in Sri Lankan cuisine.
                    </div>
                    <div class="success-rate" id="crop6-success">91% Success Rate</div>
                    <div class="crop-price" id="crop6-price">
                        💰 Current Price: Rs. 120/kg | Expected ROI: 290%<br>
                        <span style="color: #8B4513; font-size: 12px; font-weight: normal;">🌾 Traditional Staple</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Section -->
        <div id="calendar-section" class="section" style="display: none;">
            <h3 id="calendar-title">📅 Planting Calendar</h3>
            <div class="calendar-container">
                <div class="calendar-grid">
                    <div class="calendar-item" style="background: #e8f5e8; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #2E7D32;">Current</div>
                        <div style="font-size: 16px; color: #666;">Maha Season</div>
                        <div style="font-size: 14px; margin-top: 5px;">Oct - Mar</div>
                    </div>
                    <div class="calendar-item" style="background: #fff3e0; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #FF9800;">Next</div>
                        <div style="font-size: 16px; color: #666;">Yala Season</div>
                        <div style="font-size: 14px; margin-top: 5px;">Apr - Sep</div>
                    </div>
                </div>
                
                <div class="timeline" style="background: white; padding: 20px; border-radius: 15px;">
                    <h4 style="color: #2E7D32; margin-bottom: 15px;" id="planting-schedule">🌱 Optimal Planting Schedule</h4>
                    <div class="timeline-item" style="border-left: 3px solid #4CAF50; padding-left: 15px; margin-bottom: 15px;">
                        <div style="font-weight: bold; color: #2E7D32; font-size: 16px;">Rice (Paddy)</div>
                        <div style="font-size: 14px; color: #666;">Plant: Oct 15 - Nov 30 | Harvest: Feb 15 - Apr 15</div>
                    </div>
                    <div class="timeline-item" style="border-left: 3px solid #FF9800; padding-left: 15px; margin-bottom: 15px;">
                        <div style="font-weight: bold; color: #FF9800; font-size: 16px;">Green Gram</div>
                        <div style="font-size: 14px; color: #666;">Plant: Nov 1 - Dec 15 | Harvest: Jan 15 - Feb 28</div>
                    </div>
                    <div class="timeline-item" style="border-left: 3px solid #2196F3; padding-left: 15px;">
                        <div style="font-weight: bold; color: #2196F3; font-size: 16px;">Tomatoes</div>
                        <div style="font-size: 14px; color: #666;">Plant: Oct 1 - Nov 15 | Harvest: Dec 15 - Feb 15</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Market Section -->
        <div id="market-section" class="section" style="display: none;">
            <h3 id="market-title">📊 Live Market Prices</h3>
            <div class="market-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <span style="font-size: 16px; color: #666;" id="last-updated">Last Updated: 2 hours ago</span>
                <button onclick="refreshPrices()" style="padding: 10px 20px; border: none; background: #4CAF50; color: white; border-radius: 8px; cursor: pointer; font-size: 14px;">🔄 Refresh</button>
            </div>
            
            <div class="price-grid">
                <div class="price-card" style="border-left-color: #4CAF50;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: bold; color: #2E7D32; font-size: 18px;">Rice (White - Nadu)</div>
                            <div style="font-size: 14px; color: #666; margin-top: 5px;">Colombo Wholesale Market</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 28px; font-weight: bold; color: #2E7D32;">Rs. 85</div>
                            <div style="font-size: 14px; color: #4CAF50; font-weight: bold;">↗ +3.2%</div>
                        </div>
                    </div>
                </div>
                
                <div class="price-card" style="border-left-color: #FF9800;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: bold; color: #E65100; font-size: 18px;">Green Gram</div>
                            <div style="font-size: 14px; color: #666; margin-top: 5px;">Manning Market</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 28px; font-weight: bold; color: #E65100;">Rs. 220</div>
                            <div style="font-size: 14px; color: #F44336; font-weight: bold;">↘ -1.8%</div>
                        </div>
                    </div>
                </div>
                
                <div class="price-card" style="border-left-color: #2196F3;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: bold; color: #1565C0; font-size: 18px;">Tomatoes (Local)</div>
                            <div style="font-size: 14px; color: #666; margin-top: 5px;">Dambulla Economic Centre</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 28px; font-weight: bold; color: #1565C0;">Rs. 120</div>
                            <div style="font-size: 14px; color: #4CAF50; font-weight: bold;">↗ +5.1%</div>
                        </div>
                    </div>
                </div>

                <div class="price-card" style="border-left-color: #9C27B0;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: bold; color: #7B1FA2; font-size: 18px;">Onions (Big)</div>
                            <div style="font-size: 14px; color: #666; margin-top: 5px;">Peliyagoda Market</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 28px; font-weight: bold; color: #7B1FA2;">Rs. 180</div>
                            <div style="font-size: 14px; color: #4CAF50; font-weight: bold;">↗ +2.7%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Farming Tips Section -->
        <div id="tips-section" class="section" style="display: none;">
            <h3 id="tips-title">💡 Smart Farming Tips</h3>
            
            <div class="tips-grid">
                
                <div class="tips-category">
                    <h4 style="color: #2E7D32; margin-bottom: 15px; font-size: 20px;" id="weather-tips">🌤️ Weather-Based Tips</h4>
                    <div class="tip-card" style="border-left-color: #2196F3;">
                        <div style="font-weight: bold; margin-bottom: 10px; font-size: 16px;" id="tip1-title">High Humidity Alert</div>
                        <div style="font-size: 14px; color: #666; line-height: 1.5;" id="tip1-content">Current humidity is 75%. Increase ventilation for tomato crops and watch for fungal diseases. Apply organic fungicides if needed.</div>
                    </div>
                    <div class="tip-card" style="border-left-color: #FF9800;">
                        <div style="font-weight: bold; margin-bottom: 10px; font-size: 16px;" id="tip2-title">Rainfall Preparation</div>
                        <div style="font-size: 14px; color: #666; line-height: 1.5;" id="tip2-content">5mm rainfall expected today. Ensure proper drainage in rice fields. Cover sensitive vegetables if heavy rain predicted.</div>
                    </div>
                </div>

                <div class="tips-category">
                    <h4 style="color: #2E7D32; margin-bottom: 15px; font-size: 20px;" id="seasonal-tips">🌾 Seasonal Farming Tips</h4>
                    <div class="tip-card" style="border-left-color: #4CAF50;">
                        <div style="font-weight: bold; margin-bottom: 10px; font-size: 16px;" id="tip3-title">Maha Season Focus</div>
                        <div style="font-size: 14px; color: #666; line-height: 1.5;" id="tip3-content">Perfect time for rice cultivation. Ensure seedbeds are ready. Use organic matter to improve soil fertility. Plan irrigation systems.</div>
                    </div>
                    
                    <div class="tip-card" style="border-left-color: #795548;">
                        <div style="font-weight: bold; margin-bottom: 10px; font-size: 16px;" id="tip4-title">Soil Management</div>
                        <div style="font-size: 14px; color: #666; line-height: 1.5;" id="tip4-content">Red earth soil benefits from organic compost. Add 2-3 tons per acre. Test pH levels monthly. Consider green manure crops.</div>
                    </div>
                </div>
            </div>
        </div>

        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                tagline: "Smart Crop Recommendations for Sri Lankan Farmers",
                locationTitle: "📍 Your Location",
                soilTitle: "🌱 Soil Information",
                soilLabel: "Soil Type:",
                farmSizeLabel: "Farm Size (acres):",
                weatherTitle: "🌤️ Current Weather Conditions",
                tempLabel: "Temperature",
                humidityLabel: "Humidity",
                rainfallLabel: "Expected Rainfall",
                windLabel: "Wind Speed",
                seasonText: "🌾 Maha Season (October - March)",
                alertTitle: "💡 Smart Recommendations:",
                alertText: "Get customized crop suggestions based on your province's climate AND your specific soil type. Change location or soil type to see different recommendations!",
                analyzeBtn: "🔍 Get Crop Recommendations",
                recTitle: "🌾 Smart Crop Recommendations",
                calendarTitle: "📅 Planting Calendar",
                plantingSchedule: "🌱 Optimal Planting Schedule",
                marketTitle: "📊 Live Market Prices",
                lastUpdated: "Last Updated: 2 hours ago",
                tipsTitle: "💡 Smart Farming Tips",
                weatherTips: "🌤️ Weather-Based Tips",
                seasonalTips: "🌾 Seasonal Farming Tips",
                tabCrops: "🌾 Crops",
                tabCalendar: "📅 Calendar",
                tabMarket: "📊 Prices",
                tabTips: "💡 Tips"
            },
            si: {
                tagline: "ශ්‍රී ලංකා කෘෂිකර්මාන්තය සඳහා බුද්ධිමත් බෝග නිර්දේශ",
                locationTitle: "📍 ඔබේ ස්ථානය",
                soilTitle: "🌱 පස් තොරතුරු",
                soilLabel: "පස් වර්ගය:",
                farmSizeLabel: "ගොවිපල ප්‍රමාණය (අක්කර):",
                weatherTitle: "🌤️ වර්තමාන් කාලගුණික තත්ත්වයන්",
                tempLabel: "උෂ්ණත්වය",
                humidityLabel: "සාපේක්ෂ ආර්ද්‍රතාව",
                rainfallLabel: "අපේක්ෂිත වර්ෂාපතනය",
                windLabel: "සුළං වේගය",
                seasonText: "🌾 මහ කන්න (ඔක්තෝබර් - මාර්තු)",
                alertTitle: "💡 බුද්ධිමත් නිර්දේශ:",
                alertText: "ඔබේ පළාතේ කාලගුණික තත්ත්වයන් සහ ඔබේ විශේෂිත පස් වර්ගය මත පදනම්ව අභිරුචිකරණය කළ බෝග යෝජනා ලබා ගන්න. වෙනස් නිර්දේශ දැකීමට ස්ථානය හෝ පස් වර්ගය වෙනස් කරන්න!",
                analyzeBtn: "🔍 බෝග නිර්දේශ ලබා ගන්න",
                recTitle: "🌾 බුද්ධිමත් බෝග නිර්දේශ",
                calendarTitle: "📅 වගා කාලසටහන",
                plantingSchedule: "🌱 ප්‍රශස්ත වගා කාලසටහන",
                marketTitle: "📊 සජීවී වෙළඳපල මිල",
                lastUpdated: "අවසන් යාවත්කාලීන කිරීම: පැය 2 කට පෙර",
                tipsTitle: "💡 බුද්ධිමත් ගොවිතැන ඉඟි",
                weatherTips: "🌤️ කාලගුණය මත පදනම්ව ඉඟි",
                seasonalTips: "🌾 ඍතුමය ගොවිතැන ඉඟි",
                tabCrops: "🌾 බෝග",
                tabCalendar: "📅 කාලසටහන",
                tabMarket: "📊 මිල",
                tabTips: "💡 ඉඟි"
            },
            ta: {
                tagline: "இலங்கை விவசாயிகளுக்கான ஸ்மார்ட் பயிர் பரிந்துரைகள்",
                locationTitle: "📍 உங்கள் இடம்",
                soilTitle: "🌱 மண் தகவல்",
                soilLabel: "மண் வகை:",
                farmSizeLabel: "பண்ணை அளவு (ஏக்கர்):",
                weatherTitle: "🌤️ தற்போதைய வானிலை நிலைமைகள்",
                tempLabel: "வெப்பநிலை",
                humidityLabel: "ஈரப்பதம்",
                rainfallLabel: "எதிர்பார்க்கப்படும் மழைப்பொழிவு",
                windLabel: "காற்று வேகம்",
                seasonText: "🌾 மகா பருவம் (அக்டோபர் - மார்ச்)",
                alertTitle: "💡 ஸ்மார்ட் பரிந்துரைகள்:",
                alertText: "உங்கள் மாகாணத்தின் காலநிலை நிலைமைகள் மற்றும் உங்கள் குறிப்பிட்ட மண் வகையின் அடிப்படையில் தனிப்பயனாக்கப்பட்ட பயிர் பரிந்துரைகளைப் பெறுங்கள். வெவ்வேறு பரிந்துரைகளைப் பார்க்க இடம் அல்லது மண் வகையை மாற்றவும்!",
                analyzeBtn: "🔍 பயிர் பரிந்துரைகளைப் பெறுக",
                recTitle: "🌾 ஸ்மார்ட் பயிர் பரிந்துரைகள்",
                calendarTitle: "📅 நடவு காலண்டர்",
                plantingSchedule: "🌱 உகந்த நடவு அட்டவணை",
                marketTitle: "📊 நேரடி சந்தை விலைகள்",
                lastUpdated: "கடைசியாக புதுப்பிக்கப்பட்டது: 2 மணி நேரத்திற்கு முன்பு",
                tipsTitle: "💡 ஸ்மார்ட் விவசாய உதவிக்குறிப்புகள்",
                weatherTips: "🌤️ வானிலை அடிப்படையிலான உதவிக்குறிப்புகள்",
                seasonalTips: "🌾 பருவகால விவசாய உதவிக்குறிப்புகள்",
                tabCrops: "🌾 பயிர்கள்",
                tabCalendar: "📅 காலண்டர்",
                tabMarket: "📊 விலைகள்",
                tabTips: "💡 உதவிக்குறிப்புகள்"
            }
        };

        // Set initial language
        let currentLanguage = 'en';

        // Function to set language
        function setLanguage(lang) {
            currentLanguage = lang;
            
            // Update all text elements
            document.getElementById('tagline').textContent = translations[lang].tagline;
            document.getElementById('location-title').textContent = translations[lang].locationTitle;
            document.getElementById('soil-title').textContent = translations[lang].soilTitle;
            document.getElementById('soil-label').textContent = translations[lang].soilLabel;
            document.getElementById('farm-size-label').textContent = translations[lang].farmSizeLabel;
            document.getElementById('weather-title').textContent = translations[lang].weatherTitle;
            document.getElementById('temp-label').textContent = translations[lang].tempLabel;
            document.getElementById('humidity-label').textContent = translations[lang].humidityLabel;
            document.getElementById('rainfall-label').textContent = translations[lang].rainfallLabel;
            document.getElementById('wind-label').textContent = translations[lang].windLabel;
            document.getElementById('season-text').textContent = translations[lang].seasonText;
            document.getElementById('alert-title').textContent = translations[lang].alertTitle;
            document.getElementById('alert-text').textContent = translations[lang].alertText;
            document.getElementById('analyze-btn').textContent = translations[lang].analyzeBtn;
            document.getElementById('rec-title').textContent = translations[lang].recTitle;
            document.getElementById('calendar-title').textContent = translations[lang].calendarTitle;
            document.getElementById('planting-schedule').textContent = translations[lang].plantingSchedule;
            document.getElementById('market-title').textContent = translations[lang].marketTitle;
            document.getElementById('last-updated').textContent = translations[lang].lastUpdated;
            document.getElementById('tips-title').textContent = translations[lang].tipsTitle;
            document.getElementById('weather-tips').textContent = translations[lang].weatherTips;
            document.getElementById('seasonal-tips').textContent = translations[lang].seasonalTips;
            document.getElementById('tab-crops').textContent = translations[lang].tabCrops;
            document.getElementById('tab-calendar').textContent = translations[lang].tabCalendar;
            document.getElementById('tab-market').textContent = translations[lang].tabMarket;
            document.getElementById('tab-tips').textContent = translations[lang].tabTips;
            
            // Update active language button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // District data
        const districts = [
            { name: "Ampara", province: "Eastern Province" },
            { name: "Anuradhapura", province: "North Central Province" },
            { name: "Badulla", province: "Uva Province" },
            { name: "Batticaloa", province: "Eastern Province" },
            { name: "Colombo", province: "Western Province" },
            { name: "Galle", province: "Southern Province" },
            { name: "Gampaha", province: "Western Province" },
            { name: "Hambantota", province: "Southern Province" },
            { name: "Jaffna", province: "Northern Province" },
            { name: "Kalutara", province: "Western Province" },
            { name: "Kandy", province: "Central Province" },
            { name: "Kegalle", province: "Sabaragamuwa Province" },
            { name: "Kilinochchi", province: "Northern Province" },
            { name: "Kurunegala", province: "North Western Province" },
            { name: "Mannar", province: "Northern Province" },
            { name: "Matale", province: "Central Province" },
            { name: "Matara", province: "Southern Province" },
            { name: "Monaragala", province: "Uva Province" },
            { name: "Mullaitivu", province: "Northern Province" },
            { name: "Nuwara Eliya", province: "Central Province" },
            { name: "Polonnaruwa", province: "North Central Province" },
            { name: "Puttalam", province: "North Western Province" },
            { name: "Ratnapura", province: "Sabaragamuwa Province" },
            { name: "Trincomalee", province: "Eastern Province" },
            { name: "Vavuniya", province: "Northern Province" }
        ];

        // Initialize district dropdown
        function initDistrictDropdown() {
            const dropdown = document.getElementById('district-dropdown');
            districts.forEach(district => {
                const option = document.createElement('div');
                option.className = 'district-option';
                option.innerHTML = `
                    <div class="district-name">${district.name}</div>
                    <div class="district-province">${district.province}</div>
                `;
                option.addEventListener('click', () => {
                    selectDistrict(district);
                });
                dropdown.appendChild(option);
            });
        }

        // Toggle district dropdown
        function toggleDistrictDropdown() {
            const dropdown = document.getElementById('district-dropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        // Filter districts based on search input
        function filterDistricts() {
            const searchTerm = document.getElementById('district-search').value.toLowerCase();
            const options = document.querySelectorAll('.district-option');
            
            options.forEach(option => {
                const districtName = option.querySelector('.district-name').textContent.toLowerCase();
                if (districtName.includes(searchTerm)) {
                    option.style.display = 'block';
                } else {
                    option.style.display = 'none';
                }
            });
        }

        // Select a district
        function selectDistrict(district) {
            document.getElementById('district').innerHTML = `<strong>${district.name} District</strong><br><small style="color: #888;">${district.province}</small>`;
            document.getElementById('district-search').value = district.name;
            document.getElementById('district-dropdown').style.display = 'none';
            
            // Update coordinates based on district (simplified)
            const coords = {
                "Colombo": "6.9271° N, 79.8612° E",
                "Gampaha": "7.0840° N, 80.0098° E",
                "Kandy": "7.2906° N, 80.6337° E",
                "Galle": "6.0535° N, 80.2210° E",
                "Jaffna": "9.6615° N, 80.0255° E"
            };
            
            document.getElementById('coordinates').textContent = coords[district.name] || "Coordinates not available";
        }

        // Update soil info based on selection
        function updateSoilSpecificCrops() {
            const soilType = document.getElementById('soil-type').value;
            let soilInfo = "";
            
            switch(soilType) {
                case "red-earth":
                    soilInfo = "Well-drained, iron-rich soil. pH: 5.5-6.5 (slightly acidic). Good for root vegetables, tea, rubber. Requires organic matter addition. Excellent drainage properties.";
                    break;
                case "alluvial":
                    soilInfo = "Fertile soil deposited by rivers. Rich in nutrients. pH: 6.0-8.0. Ideal for rice, vegetables, sugarcane. High water retention capacity. Requires proper drainage management.";
                    break;
                case "laterite":
                    soilInfo = "Rich in iron and aluminum. pH: 4.5-6.5 (acidic). Good for cashew, pineapple, tea. Requires lime application to reduce acidity. Poor in organic matter.";
                    break;
                case "regosol":
                    soilInfo = "Sandy soil with low fertility. pH: 6.0-7.5. Suitable for coconut, cashew, groundnut. Requires heavy fertilization and irrigation. Good drainage properties.";
                    break;
                case "peat":
                    soilInfo = "Organic-rich soil with high water content. pH: 3.5-6.0 (acidic). Suitable for certain vegetables with proper drainage. Requires lime and specific nutrient management.";
                    break;
                case "coastal-sand":
                    soilInfo = "Sandy soil with high salt content. pH: 7.5-8.5 (alkaline). Suitable for coconut, palmyra, certain salt-tolerant crops. Requires organic matter and careful irrigation.";
                    break;
                case "black-cotton":
                    soilInfo = "Clay-rich soil with high shrinkage and swelling properties. pH: 7.0-8.5. Good for cotton, millets, sorghum. Requires proper water management and organic amendments.";
                    break;
            }
            
            document.getElementById('soil-info').innerHTML = `
                <div style="font-weight: bold; color: #795548; margin-bottom: 5px;">🏔️ ${document.getElementById('soil-type').options[document.getElementById('soil-type').selectedIndex].text.split(' (')[0]} Characteristics:</div>
                <div style="font-size: 13px; color: #555; line-height: 1.4;">${soilInfo}</div>
            `;
        }

        // Show loading and then recommendations
        function analyzeCrops() {
            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('recommendations').style.display = 'none';
            document.getElementById('calendar-section').style.display = 'none';
            document.getElementById('market-section').style.display = 'none';
            document.getElementById('tips-section').style.display = 'none';
            document.getElementById('nav-tabs').style.display = 'none';
            
            // Simulate analysis delay
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('recommendations').style.display = 'block';
                document.getElementById('nav-tabs').style.display = 'flex';
                
                // Show first tab as active
                showSection('recommendations');
            }, 2000);
        }

        // Show specific section
        function showSection(sectionId) {
            // Hide all sections
            document.getElementById('recommendations').style.display = 'none';
            document.getElementById('calendar-section').style.display = 'none';
            document.getElementById('market-section').style.display = 'none';
            document.getElementById('tips-section').style.display = 'none';
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section and activate tab
            switch(sectionId) {
                case 'recommendations':
                    document.getElementById('recommendations').style.display = 'block';
                    document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                    break;
                case 'calendar':
                    document.getElementById('calendar-section').style.display = 'block';
                    document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                    break;
                case 'market':
                    document.getElementById('market-section').style.display = 'block';
                    document.querySelector('.tab-btn:nth-child(3)').classList.add('active');
                    break;
                case 'tips':
                    document.getElementById('tips-section').style.display = 'block';
                    document.querySelector('.tab-btn:nth-child(4)').classList.add('active');
                    break;
            }
        }

        // Refresh market prices
        function refreshPrices() {
            const refreshBtn = event.target;
            refreshBtn.textContent = "🔄 Refreshing...";
            refreshBtn.disabled = true;
            
            setTimeout(() => {
                refreshBtn.textContent = "🔄 Refresh";
                refreshBtn.disabled = false;
                document.getElementById('last-updated').textContent = translations[currentLanguage].lastUpdated;
                
                // Show a small notification
                alert("Market prices have been updated!");
            }, 1500);
        }

        // Initialize the page
        window.onload = function() {
            initDistrictDropdown();
            updateSoilSpecificCrops();
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('district-dropdown');
                const searchInput = document.getElementById('district-search');
                
                if (!searchInput.contains(event.target) && !dropdown.contains(event.target)) {
                    dropdown.style.display = 'none';
                }
            });
        };
    </script>
</body>
</html>